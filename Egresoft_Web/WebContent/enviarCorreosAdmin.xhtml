<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">


<ui:composition xmlns:p="http://primefaces.org/ui"
	template="/templates/templateAdministrador/AdminTemplate.xhtml">
	<ui:define name="admin">
		<h:head>	
			<f:metadata>
				<f:event listener="#{logicaNavegacion.verificarSesion()}"
					type="preRenderView"></f:event>
			</f:metadata>
		</h:head>
		<h:body>
			<h4 class="green-text text-darken-5 center-align">Bienvenido a
				Enviar correos a egresados</h4>
			<div class="container-fluid">
				<h:form id="formulario">
					<p:growl id="message" showDetail="true" />
					<p:messages id="messages" showDetail="true" autoUpdate="true"
						closable="true" severity="error,fatal,info,warn" life="5200" />

					<p:panelGrid columns="2">
				<p:outputLabel value="Asunto:" />
						<p:inputText value="#{correoBean.correo.asunto}" required="true" />

						<p:outputLabel value="Cuerpo del mensaje:" />
						<p:inputTextarea value="#{correoBean.correo.cuerpo}"
							required="true" />

					</p:panelGrid>

					<p:fileUpload uploadLabel="Cargar" cancelLabel="Cancelar"
						label="Seleccionar archivo"
						fileUploadListener="#{fileUploadView.uploadAttachment}"
						mode="advanced" dragDropSupport="false" multiple="true"
						update="messages" sizeLimit="2500000" fileLimit="3" auto="false"
						allowTypes="/(\.|\/)(gif|jpe?g|png|doc|docx|xls|xlsx|pdf|ppt|pptx)$/"
						invalidFileMessage="Solamente esta permitido cargar archivos con extensiÃ³n .gif, .jpg, .png, .doc, .docx, .xls, .xlsx, .pdf, .ppt . pptx" />

					<p:dataTable id="tablaEgre" var="egre"
						value="#{envioCorreos.listaEgresados}"
						emptyMessage="No hay Egresados
		                Registrados" paginator="true"
		                rowKey="#{egre.emailPrincipal}"
						paginatorPosition="top" rows="10"
						selection="#{envioCorreos.listaEgresados}">

						<p:column headerText="Numero de cedula"
							filterBy="#{egre.idEgresado}">
							<p:outputLabel value="#{egre.idEgresado}" />
						</p:column>

						<p:column headerText="Nombres Completos"
							filterBy="#{egre.nombres}">
							<p:outputLabel value="#{egre.nombres}" />
						</p:column>

						<p:column headerText="Apellidos Completos"
							filterBy="#{egre.apellidos}">
							<p:outputLabel value="#{egre.apellidos}" />
						</p:column>

						<p:column headerText="Correo" filterBy="#{egre.emailPrincipal}">
							<p:outputLabel value="#{egre.emailPrincipal}" />
						</p:column>

						<p:column headerText="Seleccionar">
							<p:selectBooleanCheckbox
								value="#{envioCorreos.correoSeleccionado}">
								<p:ajax listener="#{envioCorreos.addCorreo(egre)}" />
							</p:selectBooleanCheckbox>
						</p:column>



					</p:dataTable>
					<center>
						<p:commandButton value="Enviar Correo" class="button big"
							actionListener="#{envioCorreos.enviar()}">

						</p:commandButton>

						<!-- <p:commandButton 
							actionListener="#{envioCorreos.enviar()}" id="enviar"
							value="Enviar" class="button big" /> -->
					</center>

				</h:form>
			</div>
		</h:body>
	</ui:define>
</ui:composition>
</html>
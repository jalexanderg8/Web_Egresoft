<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">


<ui:composition xmlns:p="http://primefaces.org/ui"
	template="/templates/templateAdministrador/AdminTemplate.xhtml">
	<ui:define name="admin">
		<h:head>
			<f:metadata>
				<f:event listener="#{logicaNavegacion.verificarSesion()}"
					type="preRenderView"></f:event>
			</f:metadata>
		</h:head>
		<h:body>
			<h4 class="green-text text-darken-5 center-align">Bienvenido a
				Enviar correos a egresados</h4>
			
				<h:form id="formulario">
				<div class="container-fluid">
					<p:growl id="message" showDetail="true" />
					<p:messages id="messages" showDetail="true" autoUpdate="true"
						closable="true" severity="error,fatal,info,warn" life="5200" />


					<p:dataTable id="tablaEgre" var="egre"
						value="#{envioCorreos.listaEgresados}"
						emptyMessage="No hay Egresados
						Registrados"
						paginator="true" paginatorPosition="top" rows="10">



						<p:column headerText="Numero de cedula"
							filterBy="#{egre.idEgresado}">
							<p:outputLabel value="#{egre.idEgresado}" />
						</p:column>

						<p:column headerText="Nombres Completos"
							filterBy="#{egre.nombres}">
							<p:outputLabel value="#{egre.nombres}" />
						</p:column>

						<p:column headerText="Apellidos Completos"
							filterBy="#{egre.apellidos}">
							<p:outputLabel value="#{egre.apellidos}" />
						</p:column>

						<p:column headerText="Correo" filterBy="#{egre.emailPrincipal}">
							<p:outputLabel value="#{egre.emailPrincipal}" />
						</p:column>

						<p:column headerText="Seleccionar">
							<p:selectBooleanCheckbox
								value="#{envioCorreos.correoSeleccionado}">
								<p:ajax listener="#{envioCorreos.addCorreo(egre)}" />
							</p:selectBooleanCheckbox>
						</p:column>



					</p:dataTable>
					<br></br><br></br>
					</div>
					<div class="container">
					

						<p:panelGrid columns="2">


							<p:outputLabel value="Asunto:" />
							<p:inputText value="#{correoBean.correo.asunto}" required="true" />

							<p:outputLabel value="Cuerpo del mensaje:" />
							<p:inputTextarea value="#{correoBean.correo.cuerpo}"
								required="true" />



						</p:panelGrid>



						<p:fileUpload uploadLabel="Cargar" cancelLabel="Cancelar"
							label="Seleccionar archivo"
							fileUploadListener="#{fileUploadView.uploadAttachment}"
							mode="advanced" dragDropSupport="false" multiple="true"
							update="messages" sizeLimit="2500000" fileLimit="3" auto="false"
							allowTypes="/(\.|\/)(gif|jpe?g|png|doc|docx|xls|xlsx|pdf|ppt|pptx)$/"
							invalidFileMessage="Solamente esta permitido cargar archivos con extensiÃ³n .gif, .jpg, .png, .doc, .docx, .xls, .xlsx, .pdf, .ppt . pptx" />


						<br></br><br></br>
						<div class="center-align">
						<p:button value="Enviar Correo" class="button big" icon="fa fa-envelope-open-o"
							actionListener="#{envioCorreos.enviar()}">
						</p:button>
						
						<p:spacer width="50px" height="10px"></p:spacer>
						<p:button value="Cancelar" class="button big" icon="fa fa-ban"
							outcome="indexAdmin.jsf">

						</p:button>
						</div>
						<!-- <p:commandButton 
							actionListener="#{envioCorreos.enviar()}" id="enviar"
							value="Enviar" class="button big" /> -->
					
					</div>
			


			</h:form>
			<br></br>
		</h:body>
	</ui:define>
</ui:composition>
</html>